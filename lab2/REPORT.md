## Отчет по лабораторной работе №2
## по курсу "Логическое программирование"

## Решение логических задач

### студент: Старцев И.Р.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|              |               |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*


## Введение

Одним из самых известных способов решений логических задач является предположение, что какое-то высказывание верное, после чего идёт проверка всех остальных фактов. По итогу предположение либо оправдывается, и мы получаем ответ, либо не оправдывается, и мы опять же можем сделать какие-то выводы. Так же из школы известен метод построение таблиц истинности, но, на мой взгляд, метод немного примитивен, и, например, задачу из моего варианта было бы довольно сложно решить данным методом.
Prolog удобен для такого сорта задач, потому что нам нужно только преобразовать условия в код, а дальше программа перебором выдаст правильный ответ.

## Задание

Вариант 21.
Дима, Герман и Олег студенты. Каждый из них увлекается тремя предметами из четырех: биологией, химией, историей, математикой. Вот что они говорили о своих склонностях. Герман. Дима единственный из нас, кто любит историю. Олег и я увлекаемся одними и теми же предметами. Мы все считаем биологию интереснейшей наукой. Двое из нас любят и химию, и биологию. Олег. Нам всем очень нравится математика. Герман завзятый историк. В одном из увлечений мы расходимся с Димой. Герман и Дима любят химию. Дима. Есть только один предмет, который любим мы все. Математикой увлекаюсь я один. Каждый из нас любит разное сочетание дисциплин. Олег ошибается, говоря, что Герман и я увлекаемся химией. Известно, что только два из утверждений каждого студента соответствуют действительности. Попробуйте сказать, какими науками увлекается каждый из них?

## Принцип решения

Сначала преобразуем начальные условия в код - у каждого из студентов по 4 высказывания.

```prolog
say(g, 1, [Ge, Ol, Di]) :- member(history, Di), not(member(history, Ge)), not(member(history, Ol)).
say(g, 2, [Ge, Ol,_]) :- joins(Ge, Ol, L), length(L, 3).
say(g, 3, [Ge, Ol, Di]) :- member(biology, Ge), member(biology, Ol), member(biology, Di).
say(g, 4, [Ge, Ol, Di]) :- fifty_fifty([Ge, Ol, Di]).

say(o, 1, [Ge, Ol, Di]) :- member(math, Ge), member(math, Ol), member(math, Di).
say(o, 2, [Ge,_,_]) :- member(history, Ge).
say(o, 3, [_, Ol, Di]) :- subtract(Ol, Di, L), length(L, 1).
say(o, 4, [Ge,_, Di]) :- member(chemistry, Ge), member(chemistry, Di).

say(d, 1, [Ge, Ol, Di]) :- joins(Ge, Ol, L1), joins(Di, L1, L2), length(L2, 1).
say(d, 2, [Ge, Ol, Di]) :- not(member(math, Ge)), not(member(math, Ol)), member(math, Di).
say(d, 3, [Ge, Ol, Di]) :- joins(Ge, Ol, L1), joins(Ge, Di, L2), joins(Di, Ol, L3),
        length(L1, I1),length(L2, I2),length(L3, I3), I1 < 3, I2 < 3, I3 < 3.
say(d, 4, [Ge,_, Di]) :- not(say(o, 4, [Ge,_, Di])).
```

Однако для некоторых высказываний нам потребуются вспомогательные предикаты. Например: увлекаемся одними и теми же предметами, двое из нас любят и химию, и биологию. Поэтому реализовываем их:

```prolog
% Когда увлекаются одними и теми же предметами
fifty_fifty([Ger, Oleg,_]) :- member(biology, Ger), member(chemistry, Ger), member(biology, Oleg), member(chemistry, Oleg).
fifty_fifty([Ger,_, Dima]) :- member(biology, Ger), member(chemistry, Ger), member(biology, Dima), member(chemistry, Dima).
fifty_fifty([_, Oleg, Dima]) :- member(biology, Dima), member(chemistry, Dima), member(biology, Oleg), member(chemistry, Oleg).

% Пересечение множеств на основе списков
joins([],_, []).
joins([H|T], Y, [H|R]) :- memb(H, Y), joins(T, Y, R), !.
joins([_|T], Y, R) :- joins(T, Y, R), !.

% Вычитание списка из списка
subtract([], _, []) :- !.
subtract([A|C], B, D) :- member(A, B), !, subtract(C, B, D).
subtract([A|B], C, [A|D]) :- subtract(B, C, D).
```

Также так как только два высказывания из четырёх являются верными, то необходимо перебирать правила:

```prolog
elems([T1, T2, L1, L2], T1, T2, L1, L2).

check(Z, V) :-
        permutation([1, 2, 3, 4], P), elems(P, T1, T2, L1, L2),
        say(Z, T1, V), say(Z, T2, V), not(say(Z, L1, V)), not(say(Z, L2, V)).
```

Теперь реализуем предикат поиска решения с помощью `permutation`:

```prolog
takethree([_|T], T) :- length(T, 3).

solve(Ger,Oleg,Dima) :-
        permutation([biology, chemistry, math, history], Ge),
        permutation([biology, chemistry, math, history], Ol),
        permutation([biology, chemistry, math, history], Di),
        takethree(Ge, Ger), takethree(Ol, Oleg), takethree(Di, Dima),
        check(g, [Ger, Oleg, Dima]), check(o, [Ger, Oleg, Dima]), check(d, [Ger, Oleg, Dima]), !.
```


## Выводы
Благодаря этой лабораторной работе я научился решать логические задачи на языке Prolog. Хоть решение и не очень эффективно из-за переборного метода, но из-за специфики Prolog оно довольно просто реализуется. Можно сделать вывод, что языки программирования, базирующиеся на логической парадигме, чаще всего лучше подходят для решения задач на логику. К сожалению такой метод не подходит для решения крупных задач.